# Сервис инвентаря для игры 'Морской бой'.
***
Хранит данные обо всех предметах в игре, содержит информацию о содержимом инвентарей
игроков. Позволяет админам игры создавать предметы (название / описание логика
использования: расходник валюта /. Для внутриигровых расходников содержит скрипт,
описывающий гейм-логику: например, предмет «Крест Нахимова», см приложение).
***
## Версия.
***
1.0.0
***  
## Структура.
***
Проект состоит из 4 сервисов, упакованных в контейнеры.
* сервис бэкенд - основное приложение
* сервис БД
* сервис вэб сервера nginx
* сервис redis для кеширования
***
## Установка.
***
Клонировать репозиторий и перейти в него в командной строке.

```
git clone https://github.com/mvrogozov/sea_battle_inventory.git
```
Перейти в папку infra.
Создать файл .env и заполнить его необходимыми переменными окружения(см.ниже)
```
sudo docker compose up --build
```
Создать и активировать виртуальное окружение.
Установить в нем зависимости:
```
pip install -r requirements/requirements.txt
```
Для выполнения миграций:
в файле .env временно заменить DB_HOST на 'localhost',
запустить контейнер с БД:
```
docker compose up postgresdb
```
выполнить
```
alembic upgrade head
```
остановить контейнер, вернуть значение DB_HOST
***
Запуск приложения.  
```
docker compose up --build
```
***
Переменные окружения, необходимые для запуска:

* DB_HOST - имя хоста с БД
* POSTGRES_DB - имя БД
* DB_PORT - порт для БД
* POSTGRES_PASSWORD - пароль БД
* POSTGRES_USER - пользователь БД
* HTTP_PORT - порт приложения
* KAFKA_SERVER - адрес сервера kafka
* REDIS_HOST - адрес сервера redis

***
## Документация openapi

* YOUR-BASE-URL/openapi.json
***
## Схема БД
***
[db_diagram.png](db_diagram.png)
***
## Тесты
Основная часть кода покрыта тестами.
Описание работы с ними в [tests/README.md](tests/README.md)
***
## Changelog
***
### 1.0.0
Основная версия.
***
Авторы:
* Рогозов Михаил
* Гоголев Николай
* Чернобровкин Тимофей